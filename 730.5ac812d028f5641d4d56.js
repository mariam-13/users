"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[730],{5730:(R,C,i)=>{i.r(C),i.d(C,{UsersModule:()=>z});var l=i(8583),o=i(665),f=i(1841),T=i(8939),e=i(3018),v=i(6215);let Z=(()=>{class r{constructor(){this.loadingSub$=new v.X(!1),this.loading$=this.loadingSub$.asObservable()}setHttpProgressStatus(t){this.loadingSub$.next(t)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),x=(()=>{class r{constructor(t){this.loader=t}intercept(t,s){return this.loader.setHttpProgressStatus(!0),s.handle(t).pipe((0,T.x)(()=>{this.loader.setHttpProgressStatus(!1)}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(Z))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();var u=i(1182),h=i(5917),y=i(5435),I=i(3190),p=i(3342),g=i(5304);let b=(()=>{class r{constructor(){this.isErrorSubject$=new v.X(!1),this.isError$=this.isErrorSubject$.asObservable()}isError(t){this.isErrorSubject$.next(t)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),U=(()=>{class r{constructor(t){this.httpClient=t,this.backendUrl="http://localhost:3000/users"}getUsers(){return this.httpClient.get(this.backendUrl)}deleteUser(t){return this.httpClient.delete(this.backendUrl+"/"+t)}addNewUser(t){return this.httpClient.post(this.backendUrl,t)}updateUser(t){return this.httpClient.put(this.backendUrl+"/"+t.id,t)}getOneUser(t){return this.httpClient.get(this.backendUrl+"/"+t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(f.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function O(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," fill in this field "),e.qZA())}function A(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Minimum is 3 symbols "),e.qZA())}function N(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," fill in this field "),e.qZA())}function H(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Minimum is 3 symbols "),e.qZA())}const m=function(r){return{inValid:r}};let _=(()=>{class r{constructor(t,s,a,c){this.route=t,this.router=s,this.errorHandler=a,this.usersHttp=c,this.chosenpostToEdit$=this.route.params.pipe((0,y.h)(d=>d.id),(0,I.w)(d=>(this.id=d.id,this.usersHttp.getOneUser(d.id))),(0,p.b)(d=>{this._chosenpostToEdit=d,this.form.patchValue(d)})),this.subs=[],this.form=new o.cw({name:new o.NI("",[o.kI.required,o.kI.minLength(3)]),lastName:new o.NI("",[o.kI.required,o.kI.minLength(3)]),age:new o.NI(null,[o.kI.required,o.kI.min(1),o.kI.max(99)]),email:new o.NI("",[]),mobile:new o.NI("",[o.kI.required])})}ngOnInit(){this.chosenpostToEdit$.subscribe(),this.valueChanges()}submit(){const t=this.form.value;this.id?(console.log("update"),this.updateUser(Object.assign(Object.assign({},t),{id:this.id}))):(console.log(t.id),this.addNewUser(t))}addNewUser(t){this.usersHttp.addNewUser(t).pipe((0,p.b)(s=>{this.router.navigate(["../",{relativeTo:this.route}])}),(0,g.K)(s=>(this.errorHandler.isError(s),(0,h.of)(null)))).subscribe()}updateUser(t){this.usersHttp.updateUser(t).pipe((0,p.b)(s=>{this.router.navigate(["../",{relativeTo:this.route}])}),(0,g.K)(s=>(this.errorHandler.isError(s),(0,h.of)(null)))).subscribe()}get isvalid(){return this.form.valid}get name(){return this.form.get("name")}get lastname(){return this.form.get("lastName")}get age(){return this.form.get("age")}get email(){return this.form.get("email")}get mobile(){return this.form.get("mobile")}valueChanges(){const t=this.age.valueChanges.subscribe(s=>{s<18?this.email.setValidators([o.kI.required]):this.email.clearValidators(),this.email.updateValueAndValidity()});this.subs.push(t)}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(b),e.Y36(U))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-form"]],decls:12,vars:21,consts:[[3,"formGroup"],["type","text","formControlName","name","placeholder","name",3,"ngClass"],[4,"ngIf"],["type","text","formControlName","lastName","placeholder","lastName",3,"ngClass"],["type","number","formControlName","age","placeholder","age",3,"ngClass"],["type","text","formControlName","email","placeholder","email",3,"ngClass"],["type","text","formControlName","mobile","placeholder","mobile",3,"ngClass"],[3,"disabled","click"]],template:function(t,s){1&t&&(e.TgZ(0,"form",0),e._UZ(1,"input",1),e.YNc(2,O,2,0,"div",2),e.YNc(3,A,2,0,"div",2),e._UZ(4,"input",3),e.YNc(5,N,2,0,"div",2),e.YNc(6,H,2,0,"div",2),e._UZ(7,"input",4),e._UZ(8,"input",5),e._UZ(9,"input",6),e.TgZ(10,"button",7),e.NdJ("click",function(){return s.submit()}),e._uU(11,"create"),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",s.form),e.xp6(1),e.Q6J("ngClass",e.VKq(11,m,s.name.invalid&&s.name.touched)),e.xp6(1),e.Q6J("ngIf",s.name.errors&&s.name.errors.required&&s.name.touched),e.xp6(1),e.Q6J("ngIf",s.name.errors&&s.name.errors.minlength&&s.name.touched),e.xp6(1),e.Q6J("ngClass",e.VKq(13,m,s.lastname.invalid&&s.lastname.touched)),e.xp6(1),e.Q6J("ngIf",s.lastname.errors&&s.lastname.errors.required&&s.lastname.touched),e.xp6(1),e.Q6J("ngIf",s.lastname.errors&&s.lastname.errors.minlength&&s.lastname.touched),e.xp6(1),e.Q6J("ngClass",e.VKq(15,m,s.age.invalid&&s.age.touched)),e.xp6(1),e.Q6J("ngClass",e.VKq(17,m,s.email.invalid&&s.email.touched)),e.xp6(1),e.Q6J("ngClass",e.VKq(19,m,s.mobile.invalid&&s.mobile.touched)),e.xp6(1),e.Q6J("disabled",!s.isvalid))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,l.mk,l.O5,o.wV],styles:["form[_ngcontent-%COMP%]{width:25%;border-radius:5px;background-color:#f2f2f2;padding:20px;margin:20px}input[_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.inValid[_ngcontent-%COMP%]{border-color:#fd0101}button[_ngcontent-%COMP%]{border:1px solid #0066cc;background-color:#09c;color:#fff;padding:5px 10px;cursor:pointer;width:100%;margin:8px 0;border-radius:4px}button[_ngcontent-%COMP%]:hover{border:1px solid #0099cc;background-color:#0ac;color:#fff;padding:5px 10px}button[_ngcontent-%COMP%]:disabled, button[disabled][_ngcontent-%COMP%]{border:1px solid #999999;background-color:#ccc;color:#666;cursor:default}"]}),r})();var k=i(7393);class L{constructor(n,t){this.count=n,this.source=t}call(n,t){return t.subscribe(new w(n,this.count,this.source))}}class w extends k.L{constructor(n,t,s){super(n),this.count=t,this.source=s}error(n){if(!this.isStopped){const{source:t,count:s}=this;if(0===s)return super.error(n);s>-1&&(this.count=s-1),t.subscribe(this._unsubscribeAndRecycle())}}}const M=function(r){return{selected:r}},F=function(r){return["/users",r]};function J(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr",1),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e.TgZ(14,"button",2),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().select.emit(c.id)}),e._uU(15,"Select"),e.qZA(),e.qZA(),e.TgZ(16,"td"),e.TgZ(17,"button",3),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().edit.emit(c.id)}),e._uU(18," Edit "),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=n.$implicit,s=e.oxw();e.Q6J("ngClass",e.VKq(8,M,s.selectedId===t.id)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.age),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.mobile),e.xp6(5),e.Q6J("routerLink",e.VKq(10,F,t.id))}}let S=(()=>{class r{constructor(){this.users=[],this.select=new e.vpe,this.edit=new e.vpe}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-users-list"]],inputs:{users:"users",selectedId:"selectedId"},outputs:{select:"select",edit:"edit"},decls:17,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"click"],[3,"routerLink","click"]],template:function(t,s){1&t&&(e.TgZ(0,"table"),e.TgZ(1,"tr"),e.TgZ(2,"th"),e._uU(3,"ID"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Last Name"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Age"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Number"),e.qZA(),e._UZ(14,"th"),e._UZ(15,"th"),e.qZA(),e.YNc(16,J,19,12,"tr",0),e.qZA()),2&t&&(e.xp6(16),e.Q6J("ngForOf",s.users))},directives:[l.sg,l.mk,u.rH],styles:[".selected[_ngcontent-%COMP%]{background-color:#1b940b}table[_ngcontent-%COMP%]{margin:20px}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid;background-color:#9b979714}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px;text-align:left}"]}),r})();var E=i(7709),$=i(6682);function P(r,n){1&r&&(e.TgZ(0,"p"),e._uU(1,"something went wrong"),e.qZA())}let Y=(()=>{class r{constructor(t){this.errorhandler=t,this.hide$=new E.xQ,this.errorHappend$=this.errorhandler.isError$.pipe((0,p.b)(()=>{setTimeout(()=>this.hide$.next(!1),2e3)})),this.isVisible$=(0,$.T)(this.hide$,this.errorHappend$)}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(b))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-error-handler"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(t,s){1&t&&(e.YNc(0,P,2,0,"p",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.isVisible$))},directives:[l.O5],pipes:[l.Ov],styles:["p[_ngcontent-%COMP%]{text-align:center;display:inline-block;text-transform:uppercase;margin:10px 0;padding:10px;border-radius:3px;color:#d8000c;background-color:#ffbaba}"]}),r})();function Q(r,n){1&r&&e._UZ(0,"div",1)}let V=(()=>{class r{constructor(t){this.loader=t}ngOnInit(){this.isLoading$=this.loader.loading$}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-http-loader"]],decls:2,vars:3,consts:[["class","loader",4,"ngIf"],[1,"loader"]],template:function(t,s){1&t&&(e.YNc(0,Q,1,0,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,s.isLoading$))},directives:[l.O5],pipes:[l.Ov],styles:[".loader[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-top:16px solid #3498db;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),r})();const j=[{path:"",component:(()=>{class r{constructor(t,s,a){this.usersHttp=t,this.errorHandler=s,this.router=a,this.selectedUserId=null,this.chosenPostToEdit=null,this.addNewUserMode=!1,this.users=[]}getAllUsers(){this.usersHttp.getUsers().pipe((0,p.b)(t=>{this.users=t}),(0,g.K)(t=>(this.errorHandler.isError(t),(0,h.of)(null)))).subscribe()}onselect(t){this.selectedUserId=t}onEdit(t){this.chosenPostToEdit=this.users.find(s=>s.id===t)}onDelete(){const t=this.users.findIndex(s=>s.id===this.selectedUserId);this.usersHttp.deleteUser(this.selectedUserId).pipe((0,p.b)(s=>{this.users.splice(t,1)}),function(r=-1){return n=>n.lift(new L(r,n))}(2),(0,g.K)(s=>(this.errorHandler.isError(s),(0,h.of)(null)))).subscribe(),this.selectedUserId=null}onAddNewUser(){this.addNewUserMode=!0}ngOnDestroy(){this.sub.unsubscribe()}ngOnInit(){this.sub=this.router.events.subscribe(t=>{t instanceof u.m2&&console.log("starrt")}),this.getAllUsers()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(U),e.Y36(b),e.Y36(u.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-users"]],decls:7,vars:3,consts:[[3,"disabled","click"],["routerLink","create",3,"click"],[3,"selectedId","users","select","edit"]],template:function(t,s){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return s.onDelete()}),e._uU(1,"Delete"),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return s.onAddNewUser()}),e._uU(3,"Add"),e.qZA(),e.TgZ(4,"app-users-list",2),e.NdJ("select",function(c){return s.selectedUserId=c})("edit",function(c){return s.onEdit(c)}),e.qZA(),e._UZ(5,"app-error-handler"),e._UZ(6,"app-http-loader")),2&t&&(e.Q6J("disabled",!s.selectedUserId),e.xp6(4),e.Q6J("selectedId",s.selectedUserId)("users",s.users))},directives:[u.rH,S,Y,V],styles:["body[_ngcontent-%COMP%]{margin-top:30px}"]}),r})()},{path:"create",component:_},{path:":id",component:_}];let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.Bz.forChild(j)],u.Bz]}),r})(),z=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[{provide:f.TP,useClass:x,multi:!0},U],imports:[[l.ez,o.UX,f.JF,K]]}),r})()}}]);